<%- include('partials/header') %>

<div class="container mt-5">
  <div class="card shadow-sm">
    <div class="card-body animate__animated animate__fadeIn">
      <h5 class="card-title mb-4">Add New 3AQAR</h5>
      <form class="was-validated" action="/submit" method="POST" enctype="multipart/form-data">
        
        <div class="mb-3">
          <label for="validationCustom01" class="form-label">3AQAR Title</label>
          <input type="text" class="form-control" id="validationCustom01" placeholder="Required 3AQAR Title" name="title" required>
          <div class="invalid-feedback">Please enter a title.</div>
        </div>

        <div class="mb-3">
          <label for="validationTextarea" class="form-label">3AQAR Description</label>
          <textarea class="form-control" id="validationTextarea" placeholder="Required 3AQAR Description" name="description" required></textarea>
          <div class="invalid-feedback">Please enter a description.</div>
        </div>

        <div class="input-group mb-3">
          <span class="input-group-text">$</span>
          <input type="text" class="form-control" aria-label="Amount" name="price" placeholder="Required 3AQAR Price" required pattern="\d+" title="Please enter numbers only">
          <span class="input-group-text">.00</span>
        </div>

        <div class="mb-3">
          <select class="form-select" required aria-label="select example" name="category">
            <option value="">Select Category</option>
            <% if (categories && categories.length > 0) { %>
              <% for (let category of categories) { %>
                <option value="<%= category.id %>"><%= category.name %></option>
              <% } %>
            <% } else { %>
              <option disabled>No categories available</option>
            <% } %>
          </select>
          <div class="invalid-feedback">Please select a category</div>
        </div>

        <div class="mb-3">
          <label class="form-label">3AQAR Photos</label>
          <div class="row g-2">
            <div class="col-md-4">
              <input type="file" class="form-control" name="photo1" onchange="previewImage(event, 'preview1')" required>
              <img id="preview1" class="img-thumbnail mt-2 d-none" style="max-height: 100px; aspect-ratio: 1/1;" />
              <div class="invalid-feedback">Main photo is required</div>
            </div>
            <div class="col-md-4">
              <input type="file" class="form-control" name="photo2" onchange="previewImage(event, 'preview2')">
              <img id="preview2" class="img-thumbnail mt-2 d-none" style="max-height: 100px; aspect-ratio: 1/1;" />
            </div>
            <div class="col-md-4">
              <input type="file" class="form-control" name="photo3" onchange="previewImage(event, 'preview3')">
              <img id="preview3" class="img-thumbnail mt-2 d-none" style="max-height: 100px; aspect-ratio: 1/1;" />
            </div>
          </div>
        </div>

        <div class="form-check mb-3">
          <input type="checkbox" class="form-check-input" id="validationFormCheck1" required>
          <label class="form-check-label" for="validationFormCheck1">Agree to terms and conditions</label>
        </div>

        <input type="hidden" name="user_id" value="<%= userId %>" />

        <div class="mb-3">
          <button class="btn btn-primary w-100" type="submit">Submit</button>
        </div>

      </form>
    </div>
  </div>
</div>



    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
      crossorigin="anonymous"
    ></script>
        <script>
function previewImage(event, previewId) {
  const input = event.target;
  const preview = document.getElementById(previewId);
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function (e) {
      preview.src = e.target.result;
      preview.classList.remove('d-none');
    }
    reader.readAsDataURL(input.files[0]);
  } else {
    preview.src = "#";
    preview.classList.add('d-none');
  }
}

      </script>
  </body>
</html>